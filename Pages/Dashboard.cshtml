@page
@model DashboardModel
@{
	ViewData["Title"] = "Dashboard";
}

<h1>Dashboard</h1>
<h2>Your Nodes</h2>

<table>
	<thead>
	<th>Name</th>
	<th>Status</th>
	<th>Expiry</th>
	<th>IP Addresses</th>
	</thead>
	<tbody>
	@foreach (var node in Model.NodesToShow)
	{
		<tr>
			<td>@node.GivenName @(node.GivenName != node.Name ? $"({node.Name})" : "")</td>
			<td>
				@(node.Online ? "Online" : $"Last seen {new DateTime(node.LastSeen.Seconds * TimeSpan.TicksPerSecond)}")
			</td>
			<td>@node.Expiry.Parse()</td>
		    <td>
			    @foreach (var ip in node.IpAddresses ?? [])
			    {
				    <div>@ip</div>
			    }
		    </td>
	    </tr>
    }
	</tbody>
</table>